\begin{figure}[H]
  \centering
  \begin{tikzpicture}
  \begin{semilogyaxis}[
      title={Logarithmic energy (pkg) consumption - Server},
      width=\plotwidthgraph,
      height=\plotheightgraph,
      xlabel={Number of Cores},
      ylabel={Energy (J)},
      ymode=log,
      xmode=linear,
      grid=both,
      minor tick num=1,
      grid style={gray!30,dashed},
      xtick={1,2,4,8,14,16,28,32,48,60},
      x tick label style={
        font=\footnotesize,
        rotate=45,
        anchor=north east
      },
      legend style={
        at={(0.98,0.98)},
        anchor=north east,
        font=\scriptsize,
        nodes={scale=0.8,transform shape},
        draw=none
      },
      legend columns=2,
      transpose legend,
      legend cell align=left,
    ]

    %% C++ %%
    % open circles
    \addplot[
      blue,
      only marks,
      mark=o,
      mark options={draw=blue,fill=white}
    ] table[row sep=\\] {
      x    y \\
      1    3756.26  \\
      2    2591.91  \\
      4    1362.61  \\
      8    799.23   \\
      14   603.37   \\
      16   627.16   \\
      28   541.37   \\  
      32   529.61   \\  
      48   740.57   \\
      60   666.04   \\
    };
    \addlegendentry{C++}
    % filled circles at 28 & 32
    \addplot[
      blue,
      only marks,
      mark=*,
      mark options={draw=blue,fill=blue}
    ] table[row sep=\\] {
      x    y \\
      28   766.51   \\  
      32   757.79   \\  
    };
    \addlegendentry{C++ same CPU}
    % trendline, but do NOT add to legend:
    \addplot[
      blue,
      dashed,
      forget plot,
      domain=1:60,
      samples=200
    ] {3000 * x^(-0.4513)};

    %% Go %%
    \addplot[
      violet,
      only marks,
      mark=o,
      mark options={draw=violet,fill=white}
    ] table[row sep=\\] {
      x    y \\
      1    28522.69 \\
      2    18231.97 \\
      4    10304.27	\\
      8    5617.27  \\
      14   3155.30  \\
      16   2904.52  \\
      28   2306.35  \\
      32   2151.74  \\
      48   1856.93  \\
      60   1744.76  \\
    };
    \addlegendentry{Go}
    \addplot[
      violet,
      only marks,
      mark=*,
      mark options={draw=violet,fill=violet}
    ] table[row sep=\\] {
      x    y \\
      28   2271.71  \\
      32   2109.37  \\
    };
    \addlegendentry{Go same CPU}
    \addplot[
      violet,
      dashed,
      forget plot,
      domain=1:60,
      samples=200
    ] {23600 * x^(-0.6783)};

    %% PyPy %%
    \addplot[
      orange,
      only marks,
      mark=o,
      mark options={draw=orange,fill=white}
    ] table[row sep=\\] {
      x    y \\
      1    7972.65  \\
      2    5147.60  \\
      4    2828.21  \\
      8    1747.96  \\
      14   1232.03  \\
      16   1140.80  \\
      28   1252.93  \\
      32   1257.81  \\
      48   1354.03  \\
      60   1354.03  \\
    };
    \addlegendentry{PyPy}
    \addplot[
      orange,
      only marks,
      mark=*,
      mark options={draw=orange,fill=orange}
    ] table[row sep=\\] {
      x    y \\
      28   1175.52  \\
      32   1155.74  \\
    };
    \addlegendentry{PyPy same CPU}
    \addplot[
      orange,
      dashed,
      forget plot,
      domain=1:60,
      samples=200
    ] {6250 * x^(-0.4633)};

    %% Python %%
    \addplot[
      green!60!black,
      only marks,
      mark=o,
      mark options={draw=green!60!black,fill=white}
    ] table[row sep=\\] {
      x    y \\
      1    1510534.76 \\
      2    1141490.15 \\
      4    313537.85  \\
      8    194458.98  \\
      14   130506.94  \\
      16   111438.01  \\
      28   122384.40  \\
      32   120259.78  \\
      48   97331.00   \\
      60   93718.97   \\
    };
    \addlegendentry{Python}
    \addplot[
      green!60!black,
      only marks,
      mark=*,
      mark options={draw=green!60!black,fill=green!60!black}
    ] table[row sep=\\] {
      x    y \\
      28   96049.86 \\  
      32   87343.61 \\
    };
    \addlegendentry{Python same CPU}
    \addplot[
      green!60!black,
      dashed,
      forget plot,
      domain=1:60,
      samples=200
    ] {1.27e6 * x^(-0.7046)};

  \end{semilogyaxis}
\end{tikzpicture}
\caption{Server - Logarithmic energy (pkg) consumption}{Logarithm energy (pkg) consumption of the Server benchmark across different programming languages.}
\label{fig:log-server-energy-pkg}
\end{figure}


\begin{figure}[h]
  \centering
  \begin{tikzpicture}
  \begin{axis}[
      title={Energy Efficiency Speedup},
      width=\plotwidthgraph,
      height=\plotheightgraph,
      xlabel={Number of Cores},
      ylabel={Speedup (relative to 1 core)},
      xmode=linear,
      grid=both,
      minor tick num=1,
      grid style={gray!30,dashed},
      xtick={1,2,4,8,14,16,28,32,48,60},
      x tick label style={
        font=\footnotesize,
        rotate=45,
        anchor=north east
      },
      legend style={
        at={(0.02,0.98)},
        anchor=north west,
        font=\scriptsize,
        nodes={scale=0.8,transform shape},
        draw=none
      },
      legend columns=1,
      legend cell align=left,
      ymin=0,
      ymax=18,
    ]

    %% C++ Speedup (Energy efficiency improvement) %%
    \addplot[
      blue,
      mark=o,
      mark options={draw=blue,fill=white},
      line width=1.5pt
    ] table[row sep=\\] {
      x    y \\
      1    1.00  \\
      2    1.45  \\
      4    2.76  \\
      8    4.70  \\
      14   6.22  \\
      16   5.99  \\
      28   6.94  \\  
      32   7.09  \\  
      48   5.07  \\
      60   5.64  \\
    };
    \addlegendentry{C++}
    
    \addplot[
      blue,
      only marks,
      mark=*,
      mark options={draw=blue,fill=blue}
    ] table[row sep=\\] {
      x    y \\
      28   4.90  \\  
      32   4.95  \\  
    };
    \addlegendentry{C++ same CPU}

    %% Go Speedup %%
    \addplot[
      violet,
      mark=o,
      mark options={draw=violet,fill=white},
      line width=1.5pt
    ] table[row sep=\\] {
      x    y \\
      1    1.00  \\
      2    1.56  \\
      4    2.77  \\
      8    5.08  \\
      14   9.04  \\
      16   9.82  \\
      28   12.37 \\
      32   13.26 \\
      48   15.36 \\
      60   16.35 \\
    };
    \addlegendentry{Go}
    
    \addplot[
      violet,
      only marks,
      mark=*,
      mark options={draw=violet,fill=violet}
    ] table[row sep=\\] {
      x    y \\
      28   12.56 \\
      32   13.52 \\
    };
    \addlegendentry{Go same CPU}

    %% PyPy Speedup %%
    \addplot[
      orange,
      mark=o,
      mark options={draw=orange,fill=white},
      line width=1.5pt
    ] table[row sep=\\] {
      x    y \\
      1    1.00  \\
      2    1.55  \\
      4    2.82  \\
      8    4.56  \\
      14   6.47  \\
      16   6.99  \\
      28   6.36  \\
      32   6.34  \\
      48   5.89  \\
      60   5.89  \\
    };
    \addlegendentry{PyPy}
    
    \addplot[
      orange,
      only marks,
      mark=*,
      mark options={draw=orange,fill=orange}
    ] table[row sep=\\] {
      x    y \\
      28   6.78  \\
      32   6.90  \\
    };
    \addlegendentry{PyPy same CPU}

    %% Python Speedup %%
    \addplot[
      green!60!black,
      mark=o,
      mark options={draw=green!60!black,fill=white},
      line width=1.5pt
    ] table[row sep=\\] {
      x    y \\
      1    1.00  \\
      2    1.32  \\
      4    4.82  \\
      8    7.77  \\
      14   11.57 \\
      16   13.55 \\
      28   12.34 \\
      32   12.56 \\
      48   15.52 \\
      60   16.11 \\
    };
    \addlegendentry{Python}
    
    \addplot[
      green!60!black,
      only marks,
      mark=*,
      mark options={draw=green!60!black,fill=green!60!black}
    ] table[row sep=\\] {
      x    y \\
      28   15.73 \\  
      32   17.29 \\
    };
    \addlegendentry{Python same CPU}

  \end{axis}
  \end{tikzpicture}
\caption{Server - Speedup Energy Efficiency}{Server benchmark energy performance comparison across programming languages: Energy efficiency speedup relative to single-core performance (higher is better).}
\label{fig:energy-comparison}
\end{figure}
